<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@700&display=swap" rel="stylesheet">
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@700&display=swap" rel="stylesheet">

<!--Styles-->
<style>
  span {
    font-family: "Inter", sans-serif;
    font-size: 10px;
    color: #666;
    padding: 16px 8px;
  }

  .colour_pallete-box {
    font-family: "Inter", sans-serif;
    border-bottom: 1px solid #eee;
    padding: 16px 8px;
  }

  .colour_pallete-box .header {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
  }

  .colour_pallete-box .header h2 {
    font-size: 14px;
    margin: 0;
    color: #333;
    font-weight: bold;
    font-family: 'Roboto Mono'
  }

  .colour_pallete-box .header button {
    padding: 4px 8px;
    font-size: 12px;
    font-weight: 600;
    align-self: flex-start;
    background-color: #222;
    color: #FFF;
    border: 1px solid #555;
    border-radius: 4px;
    margin-left: 8px;
    font-family: 'Rubik';
    outline: none;
    position: relative;
    left: -2%;
    
  }

  .colour_pallete-box .header button:focus, .colour_pallete-box .header button:hover {
    cursor: pointer;
    outline: none;
  }

  .colour_pallete-box .color-list {
    display: flex;
    flex-direction: row;
    margin-top: 12px;
  }

  .colour_pallete-box .color-list .color {
    height: 32px;
    min-width: 32px;
    width: 32px;
    border-radius: 3px;
    margin-right: 8px;
  }

  #search {
    margin: 8px 8px 0 8px;
    border-bottom: 1px solid #dedede;
    padding: 4px 8px;
    font-family: "Inter", sans-serif;
    color: #333333;
    font-size: 12px;
    border: 1px solid #eee;
    border-radius: 2px;
    outline: none;
    font-family: 'Roboto Mono';
  }

  .no-results {
    padding: 8px;
    margin: 8px;
    font-family: "Inter", sans-serif;
    background-color: #eee;
    color: #333;
    font-size: 12px;
    text-align: center;
    line-height: 2;
  }

  .divider {
    height: 0px;
    margin: 16px 0px 0 0px;
    border-bottom: 1px solid #eee;
  }

  ::-webkit-scrollbar {
    background: transparent;
  }

  ::-webkit-scrollbar {
    width: 5px;
  }
  ::-webkit-scrollbar-thumb {
    background: #222;
  }
  ::-webkit-scrollbar-track {
    background: #D3D1CB;
  }
</style>

<span>Add palettes from popular design systems to your file</span>
<!--Search-->
<input type="text" id="search" onkeyup="filter()" placeholder="Search..">
<!--Divider-->
<div class="divider"></div>
<script>
  // define palettes
  var colors = [{
    "colour_pallete_name": "Gray",
    "colors": ["#f8f9fa", "#f1f3f5", "#e9ecef", "#dee2e6", "#ced4da", "#adb5bd", "#868e96", "#495057", "#343a40", "#212529"]
  }, {
    "colour_pallete_name": "Alibaba",
    "colors": ["#f8f9fa", "#fa541c", "#fa8c16", "#faad14", "#fadb14", "#a0d911", "#52c41a", "#13c2c2", "#1890ff", "#2f54eb"]
  }, 
  {
    "colour_pallete_name": "Apple",
    "colors": ["#157EFA", "#3DC55D", "#595AD3", "#FD9426", "#FD9426", "#AE58DB", "#FC3D39", "#60C9F8", "#FECB2F", "8E8E93"]
  }, {
    "colour_pallete_name": "Atlassian",
    "colors": ["#0052CC", "#172B4D", "#FF5630", "#FFAB00", "#36B37E", "#00B8D9", "#6554C0", "#FC3D39", "#FC3D39", "#FC3D39"]
  }, {
    "colour_pallete_name": "Bulb",
    "colors": ["#E4228E", "#003366", "#00AB55", "#00AB55", "#EE0000", "#FF6200", "#F2F2F2", "#CCCCCC", "#8c", "#FC3D39"]
  }
  ];

  //create UI
  for (let i = 0; i < colors.length; i++) {
    //create main container
    let colour_pallete = document.createElement('div');
    colour_pallete.classList.add('colour_pallete-box');

    //create header component
    let header = document.createElement('div');
    header.classList.add('header')

    //create header text element
    let colour_palleteName = document.createElement('h2');
    colour_palleteName.innerHTML = colors[i].colour_pallete_name;

    //create add button
    let addButton = document.createElement('button');
    addButton.innerHTML = 'Import Scheme ';
    //add event listener on click
    addButton.onclick = () => {
      let colorsList = colors[i].colors
      let name = colors[i].colour_pallete_name
      parent.postMessage({
        pluginMessage: {
          type: 'create-palette',
          colorsList,
          name
        }
      }, '*')
    }

    //add elements to header component, and add header component to main box
    header.appendChild(colour_palleteName);
    header.appendChild(addButton);
    colour_pallete.appendChild(header);

    //loop through the palettes to create list
    let colour_palleteColors = document.createElement('div');
    colour_palleteColors.classList.add('color-list');

    var j;
    for (j = 0; j < colors[i].colors.length; j++) {
      let color = document.createElement('div');
      color.classList.add('color');
      color.style.backgroundColor = colors[i].colors[j];
      colour_palleteColors.appendChild(color);
    }
    colour_pallete.appendChild(colour_palleteColors);

    //add the main container to the body
    let bodyEl = document.querySelector('body');
    bodyEl.appendChild(colour_pallete);
  }


  /*filter functionality*/

  //get all the headings for searching
  let elList = document.getElementsByTagName('h2');

  //create empty state
  noResult = document.createElement('div');
  noResult.classList.add('no-results');
  noResult.innerHTML = 'ಥ﹏ಥ  <br/> No Results'
  noResult.style.display = "none";
  let bodyEl = document.querySelector('body');
  bodyEl.appendChild(noResult);

  //the filter function
  function filter() {
    //get the query and convert it to uppercase
    let query = document.getElementById('search').value.toUpperCase();

    //maintain miss list
    let missCount = 0;

    //check the query against each element
    for (let i = 0; i < elList.length; i++) {
      if (elList[i].innerHTML.toUpperCase().indexOf(query) > -1) {
        //match found
        elList[i].parentElement.parentElement.style.display = ""
      } else {
        //match not found
        elList[i].parentElement.parentElement.style.display = "none";
        missCount++;
      }
      //show empty state if 100% miss
      if (missCount == elList.length) {
        noResult.style.display = "";
      } else {
        noResult.style.display = "none";
      }
    }
  }
</script>
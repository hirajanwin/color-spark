<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&display=swap" rel="stylesheet">
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@900&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@600&display=swap" rel="stylesheet">


<!--Styles-->
<style>
  span {
    font-family: "Inter", sans-serif;
    font-size: 10px;
    color: #666;
    padding: 16px 8px;
  }

  .colour_pallete-box {
    font-family: "Inter", sans-serif;
    border-bottom: 1px solid #eee;
    padding: 16px 8px;
  }

  .colour_pallete-box .header {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
  }

  .colour_pallete-box .header h2 {
    font-size: 14px;
    margin: 0;
    color: #2d3748;
    font-weight: bold;
    line-height: 1.1em;
    letter-spacing: -.035em;
    font-family: "Inter", sans-serif;
  }

  .colour_pallete-box .header button {
    padding: 4px 10px;
    font-size: 12px;
    align-self: flex-start;
    font-weight: 600;
    background-color: #222;
    font-family: "Inter", sans-serif;
    color: #FFF;
    border: 2px solid #FFF;
    border-radius: 5px;
    outline: none;
    position: relative;
    left: 1%;
    transition: all .15s ease;
    
  }

  .colour_pallete-box .header button:focus, .colour_pallete-box .header button:hover {
    cursor: pointer;
    outline: none;
    background: gray;
    color: #FFF;
    transition: all .15s ease;
    
          animation: jello-horizontal 0.9s both;
  }

  .colour_pallete-box .color-list {
    display: flex;
    flex-direction: row;
    margin-top: 12px;
  }

  .colour_pallete-box .color-list .color {
    height: 32px;
    min-width: 32px;
    width: 32px;
    border-radius: 3px;
    margin-right: 8px;
  }

  #search {
   
    border-bottom: 1px solid #dedede;
    padding: 4px 8px;
    font-family: "Inter", sans-serif;
    color: #333333;
    position: relative;
    left: 30%;
    font-size: 12px;
    border: 1px solid #eee;
    border-radius: 2px;
    outline: none;
    font-family: 'Roboto Mono';
  }

  .no-results {
    padding: 8px;
    margin: 8px;
    position: relative;
    top: 125px;
    font-size: 14px;
    margin: 0;
    color: #2d3748;
    font-weight: bold;
    line-height: 1.1em;
    letter-spacing: -.035em;
    font-family: "Inter", sans-serif;
    text-align: center;
    line-height: 2;
  }

  #search-emoji {
    font-size: 22px;
  }

  .divider {
    height: 0px;
    margin: 16px 0px 0 0px;
    border-bottom: 1px solid #eee;
  }

  ::-webkit-scrollbar {
    background: transparent;
  }

  ::-webkit-scrollbar {
    width: 5px;
  }
  ::-webkit-scrollbar-thumb {
    background: #222;
  }
  ::-webkit-scrollbar-track {
    background: #D3D1CB;
  }
</style>

<span>Add palettes from popular design systems to your file</span>
<!--Search-->
<input type="text" id="search" onkeyup="filter()" placeholder="Search..">

<!--Divider-->
<div class="divider"></div>
<script>
  // define palettes
  var colors = [{
    "colour_pallete_name": "Gray",
    "colors": ["#f8f9fa", "#f1f3f5", "#e9ecef", "#dee2e6", "#ced4da", "#adb5bd", "#868e96", "#495057", "#343a40", "#212529"]
  }, {
    "colour_pallete_name": "Red",
    "colors": ["#fff5f5", "#ffe3e3", "#ffc9c9", "#ffa8a8", "#ff8787", "#ff6b6b", "#fa5252", "#f03e3e", "#e03131", "#c92a2a"] // todo
  }, 
  {
    "colour_pallete_name": "Pink",
    "colors": ["#fff0f6", "#ffdeeb", "#fcc2d7", "#faa2c1", "#f783ac", "#f06595", "#e64980", "#d6336c", "#c2255c", "#a61e4d"]
  }, {
    "colour_pallete_name": "Grape",
    "colors": ["#f8f0fc", "#f3d9fa", "#eebefa", "#e599f7", "#da77f2", "#cc5de8", "#be4bdb", "#ae3ec9", "#9c36b5", "#862e9c"]
  }, {
    "colour_pallete_name": "Violet",
    "colors": ["#f3f0ff", "#e5dbff", "#d0bfff", "#b197fc", "#9775fa", "#845ef7", "#7950f2", "#7048e8", "#6741d9", "#5f3dc4"]
  },
  {
    "colour_pallete_name": "Indigo",
    "colors": ["#edf2ff", "#dbe4ff", "#bac8ff", "#91a7ff", "#748ffc", "#5c7cfa", "#4c6ef5", "#4263eb", "#3b5bdb", "#364fc7"]
  },
  {
    "colour_pallete_name": "Blue",
    "colors": ["#e7f5ff", "#d0ebff", "#a5d8ff", "#74c0fc", "#4dabf7", "#339af0", "#228be6", "#1c7ed6", "#1971c2", "#1864ab"]
  }
  ];

  //create UI
  for (let i = 0; i < colors.length; i++) {
    //create main container
    let colour_pallete = document.createElement('div');
    colour_pallete.classList.add('colour_pallete-box');

    //create header component
    let header = document.createElement('div');
    header.classList.add('header')

    //create header text element
    let colour_palleteName = document.createElement('h2');
    colour_palleteName.innerHTML = colors[i].colour_pallete_name;

    //create add button
    let addButton = document.createElement('button');
    addButton.innerHTML = 'Import + ';
    //add event listener on click
    addButton.onclick = () => {
      let colorsList = colors[i].colors
      let name = colors[i].colour_pallete_name
      parent.postMessage({
        pluginMessage: {
          type: 'create-palette',
          colorsList,
          name
        }
      }, '*')
    }

    //add elements to header component, and add header component to main box
    header.appendChild(colour_palleteName);
    header.appendChild(addButton);
    colour_pallete.appendChild(header);

    //loop through the palettes to create list
    let colour_palleteColors = document.createElement('div');
    colour_palleteColors.classList.add('color-list');

    var j;
    for (j = 0; j < colors[i].colors.length; j++) {
      let color = document.createElement('div');
      color.classList.add('color');
      color.style.backgroundColor = colors[i].colors[j];
      colour_palleteColors.appendChild(color);
    }
    colour_pallete.appendChild(colour_palleteColors);

    //add the main container to the body
    let bodyEl = document.querySelector('body');
    bodyEl.appendChild(colour_pallete);
  }


  /*filter functionality*/

  //get all the headings for searching
  let elList = document.getElementsByTagName('h2');

  //create empty state
  noResult = document.createElement('div');
  noResult.classList.add('no-results');
  noResult.innerHTML = '<span id="search-emoji">ðŸ˜ž</span>  <br/>  Bummer! No results found.'
  noResult.style.display = "none";
  let bodyEl = document.querySelector('body');
  bodyEl.appendChild(noResult);

  //the filter function
  function filter() {
    //get the query and convert it to uppercase
    let query = document.getElementById('search').value.toUpperCase();

    //maintain miss list
    let missCount = 0;

    //check the query against each element
    for (let i = 0; i < elList.length; i++) {
      if (elList[i].innerHTML.toUpperCase().indexOf(query) > -1) {
        //match found
        elList[i].parentElement.parentElement.style.display = ""
      } else {
        //match not found
        elList[i].parentElement.parentElement.style.display = "none";
        missCount++;
      }
      //show empty state if 100% miss
      if (missCount == elList.length) {
        noResult.style.display = "";
      } else {
        noResult.style.display = "none";
      }
    }
  }
</script>

  
    

